{% extends "base.html" %} {% block content%}

<link rel="stylesheet" href="{{ url_for('auth_static',path='libs/dropzone/dropzone.css') }}" />
<link rel="stylesheet" href="{{ url_for('auth_static',path='libs/select2/select2.css') }}" />
<link rel="stylesheet" href="{{ url_for('auth_static',path='css/demo.css') }}" />

<style>
    canvas {
        outline-style: double;
    }

    img {
        cursor: drag;
    }
</style>

<div class="container-fluid flex-grow-1 container-p-y">
    <h4 class="fw-bold py-3 mb-4">FF Ngoai</h4>
    <!-- Hoverable Table rows -->
    <div class="content-wrapper">
        <div class="row">
            <div class="col-md-7  mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title text-primary text-uppercase">{{data.provider}}</h5>
                        {% for item in data.line_items %}
                        <div class="card-header py-3 d-inline-block">
                            <ul class="nav nav-pills" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button type="button" class="nav-link active" role="tab" data-bs-toggle="tab"
                                        data-bs-target="#navs-{{loop.index}}-1-side"
                                        aria-controls="navs-{{loop.index}}-1-side" aria-selected="false" tabindex="-1">1
                                        Side</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button type="button" class="nav-link" role="tab" data-bs-toggle="tab"
                                        data-bs-target="#navs-{{loop.index}}-2-side"
                                        aria-controls="navs-{{loop.index}}-2-side" aria-selected="true">2
                                        Side</button>
                                </li>
                            </ul>
                        </div>
                        <div class="row canvas-design">
                            <div class="col-12" id="front_canvas-{{loop.index}}">

                                <div class="tab-content pt-0">
                                    <div class="tab-pane fade  active show" id="navs-{{loop.index}}-1-side"
                                        role="tabpanel">
                                        <div class="container">
                                            <div class="mb-2"><b><i>{{item.line_item_id}}</i></b> - Template size:
                                                <span id="front_template"></span>
                                                <div class="button-groups ms-auto card-header-elements" style="float: right;">
                                                    <button class="btn btn-outline-primary" type="button">Flip design</button>
                                                    <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#design-modal-1">Chose
                                                        design</button>
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <strong>Front</strong>
                                                <div class="col-3">
                                                    <label class="form-label" for="front-{{loop.index}}-img-x">x</label>
                                                    <input class="form-control" id="front-{{loop.index}}-img-x"
                                                        type="number">
                                                </div>
                                                <div class="col-3">
                                                    <label class="form-label" for="front-{{loop.index}}-img-y">y</label>
                                                    <input class="form-control" id="front-{{loop.index}}-img-y"
                                                        type="number">
                                                </div>
                                                <div class="col-3">
                                                    <label class="form-label" for="front-{{loop.index}}-img-w">w</label>
                                                    <input class="form-control" id="front-{{loop.index}}-img-w"
                                                        type="number">
                                                </div>
                                                <div class="col-3">
                                                    <label class="form-label" for="front-{{loop.index}}-img-h">h</label>
                                                    <input class="form-control" id="front-{{loop.index}}-img-h"
                                                        type="number">
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <div class="col-12">
                                                    <div class="des text-center justify-content-center">
                                                        <input type="hidden" value="{{item.link_des[0]}}">
                                                        <canvas class="front"></canvas>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12 text-center justify-content-center">
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary horizontal-left">
                                                        <i class='bx bx-horizontal-left'></i>
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary horizontal-center">
                                                        <i class='bx bx-horizontal-center'></i>
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary horizontal-right">
                                                        <i class='bx bx-horizontal-right'></i>
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary vertical-top">
                                                        <i class='bx bx-vertical-top'></i>
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary vertical-center">
                                                        <i class='bx bx-vertical-center'></i>
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary vertical-bottom">
                                                        <i class='bx bx-vertical-bottom'></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="navs-{{loop.index}}-2-side" role="tabpanel">
                                        <div class="container">
                                        </div>
                                        <div class="container">
                                            <div class="mb-2"><b><i>{{item.line_item_id}}</i></b> - Template size:
                                                <span id="front_template"></span>
                                                <div class="button-groups ms-auto card-header-elements" style="float: right;">
                                                    <button class="btn btn-outline-primary" type="button">Flip design</button>
                                                    <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#design-modal-1">Chose
                                                        design</button>
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <strong>Front</strong>
                                                <div class="col-3">
                                                    <label class="form-label" for="front-{{loop.index}}-img-x">x</label>
                                                    <input class="form-control" id="front-{{loop.index}}-img-x"
                                                        type="number">
                                                </div>
                                                <div class="col-3">
                                                    <label class="form-label" for="front-{{loop.index}}-img-y">y</label>
                                                    <input class="form-control" id="front-{{loop.index}}-img-y"
                                                        type="number">
                                                </div>
                                                <div class="col-3">
                                                    <label class="form-label" for="front-{{loop.index}}-img-w">w</label>
                                                    <input class="form-control" id="front-{{loop.index}}-img-w"
                                                        type="number">
                                                </div>
                                                <div class="col-3">
                                                    <label class="form-label" for="front-{{loop.index}}-img-h">h</label>
                                                    <input class="form-control" id="front-{{loop.index}}-img-h"
                                                        type="number">
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <div class="col-12">
                                                    <div class="des text-center justify-content-center">
                                                        <input type="hidden" value="{{item.link_des[0]}}">
                                                        <canvas class="front"></canvas>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12 text-center justify-content-center">
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary horizontal-left">
                                                        <i class='bx bx-horizontal-left'></i>
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary horizontal-center">
                                                        <i class='bx bx-horizontal-center'></i>
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary horizontal-right">
                                                        <i class='bx bx-horizontal-right'></i>
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary vertical-top">
                                                        <i class='bx bx-vertical-top'></i>
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary vertical-center">
                                                        <i class='bx bx-vertical-center'></i>
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-icon me-2 btn-primary vertical-bottom">
                                                        <i class='bx bx-vertical-bottom'></i>
                                                    </button>
                                                </div>
                                            </div>

                                            <hr class="mb-4 mt-4">
                                            <div class="row">
                                                <div class="container">
                                                    <div class="row">
                                                        <div class="col-12" id="back_canvas-{{loop.index}}">
                                                            <div class="mb-2"><b><i>{{item.line_item_id}}</i></b> -
                                                                Template
                                                                size:
                                                                <span id="back_template"></span>
                                                                <button class="btn btn-primary" type="button"
                                                                    data-bs-toggle="modal"
                                                                    data-bs-target="#design-modal-2"
                                                                    style="float: right;">Chose design</button>
                                                            </div>
                                                            <div>
                                                                <strong>Back</strong>
                                                                <div class="row mb-3">
                                                                    <div class="col-3">
                                                                        <label class="form-label"
                                                                            for="front-{{loop.index}}-img-x">x</label>
                                                                        <input class="form-control"
                                                                            id="front-{{loop.index}}-img-x"
                                                                            type="number">
                                                                    </div>
                                                                    <div class="col-3">
                                                                        <label class="form-label"
                                                                            for="front-{{loop.index}}-img-y">y</label>
                                                                        <input class="form-control"
                                                                            id="front-{{loop.index}}-img-y"
                                                                            type="number">
                                                                    </div>
                                                                    <div class="col-3">
                                                                        <label class="form-label"
                                                                            for="front-{{loop.index}}-img-w">w</label>
                                                                        <input class="form-control"
                                                                            id="front-{{loop.index}}-img-w"
                                                                            type="number">
                                                                    </div>
                                                                    <div class="col-3">
                                                                        <label class="form-label"
                                                                            for="front-{{loop.index}}-img-h">h</label>
                                                                        <input class="form-control"
                                                                            id="front-{{loop.index}}-img-h"
                                                                            type="number">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="des text-center justify-content-center">
                                                                <input type="hidden" value="{{item.link_des[1]}}">
                                                                <canvas class="back"></canvas>
                                                            </div>
                                                            <div class="row text-center justify-content-center">
                                                                <div class="col-12">
                                                                    <button type="button"
                                                                        class="btn btn-icon me-2 btn-primary horizontal-left">
                                                                        <i class='bx bx-horizontal-left'></i>
                                                                    </button>
                                                                    <button type="button"
                                                                        class="btn btn-icon me-2 btn-primary horizontal-center">
                                                                        <i class='bx bx-horizontal-center'></i>
                                                                    </button>
                                                                    <button type="button"
                                                                        class="btn btn-icon me-2 btn-primary horizontal-right">
                                                                        <i class='bx bx-horizontal-right'></i>
                                                                    </button>
                                                                    <button type="button"
                                                                        class="btn btn-icon me-2 btn-primary vertical-top">
                                                                        <i class='bx bx-vertical-top'></i>
                                                                    </button>
                                                                    <button type="button"
                                                                        class="btn btn-icon me-2 btn-primary vertical-center">
                                                                        <i class='bx bx-vertical-center'></i>
                                                                    </button>
                                                                    <button type="button"
                                                                        class="btn btn-icon me-2 btn-primary vertical-bottom">
                                                                        <i class='bx bx-vertical-bottom'></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal -->
                            <div class="modal fade" id="design-modal-1" tabindex="-1" role="dialog"
                                aria-labelledby="designModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="designModalLabel">Chose design</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="design-options row">
                                                {% for link in item.link_des %}
                                                <img src="{{link}}" class="design-image custom-option col-6"
                                                    data-src="{{link}}" style="cursor: pointer;">
                                                {% endfor %}
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <div class="modal-footer">
                                                <div class="col-12 mt-3 text-center">
                                                    <button type="reset" class="btn btn-label-info" id="upload-design-1"
                                                        data-bs-toggle="modal" data-bs-target="#uploadDesign_{{loop.index}}">Upload
                                                        design</button>
                                                    <button type="reset" class="btn btn-label-secondary"
                                                        data-bs-dismiss="modal" aria-label="Close">Close</button>
                                                    <button type="submit" id="chose-design-1"
                                                        class="btn btn-primary me-sm-3 me-1">Submit</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="modal fade" id="design-modal-2" tabindex="-1" role="dialog"
                                aria-labelledby="designModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="designModalLabel">Chose design</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="design-options">
                                                {% for link in item.link_des %}
                                                <img src="{{link}}" class="design-image custom-option col-6"
                                                    data-src="{{link}}" style="cursor: pointer;">
                                                {% endfor %}
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <div class="col-12 mt-3 text-center">
                                                <button type="reset" class="btn btn-label-info" id="upload-design-2"
                                                    data-bs-toggle="modal" data-bs-target="#uploadDesign_{{loop.index}}">Upload
                                                    design</button>
                                                <button type="reset" class="btn btn-label-secondary"
                                                    data-bs-dismiss="modal" aria-label="Close">Close</button>
                                                <button type="submit" id="chose-design-2"
                                                    class="btn btn-primary me-sm-3 me-1">Submit</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="modal fade" id="uploadDesign_{{loop.index}}" tabindex="-1" style="display: none;"
                                aria-hidden="true">
                                <div class="modal-dialog modal-lg modal-simple modal-enable-otp modal-dialog-centered">
                                    <div class="modal-content p-3 p-md-5">
                                        <div class="modal-body">
                                            <!-- Multi  -->
                                            <div class="col-12">
                                                <div class="card">
                                                    <h5 class="card-header">Multiple</h5>
                                                    <div class="card-body">
                                                        <form method="POST" class="dropzone needsclick"
                                                            id="dropzone-multi">
                                                            <!-- Hidden input fields for order id and product -->
                                                            <input type="hidden" id="team" name="team" value="" />
                                                            <input type="hidden" id="order_id" name="order_id"
                                                                value="" />
                                                            <input type="hidden" id="product_id" name="product_id"
                                                                value="" />
                                                            <input type="hidden" id="line_item_id" name="line_item_id"
                                                                value="" />
                                                            <input type="hidden" id="shop" name="shop" value="" />
                                                            <input type="hidden" id="seller" name="seller" value="" />
                                                            <input type="hidden" id="order_date" name="order_date"
                                                                value="" />
                                                            <div class="upload-image-form">
                                                                <div class="dz-message needsclick">
                                                                    Drop files here or click to upload
                                                                </div>
                                                                <div class="fallback">
                                                                    <input name="file" type="file"
                                                                        accept="image/*, application/pdf, application/illustrator" />
                                                                </div>
                                                                <!-- submit btn -->
                                                                <div class="text-center mt-3">
                                                                    <button type="button" class="btn btn-primary"
                                                                        id="uploadBtn">Upload</button>
                                                                    <button type="button"
                                                                        class="btn btn-outline-secondary"
                                                                        data-bs-dismiss="modal">Close</button>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Multi  -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="col-md-5 mb-3">
                <div class="card mb-3">
                    <div class="card-body">
                        <div>
                            <label class="form-label" for="print_provider">Print provider</label>
                            <select class="form-select form-select-sm form-select-color print_provider-select mb-3">
                                <option class="form-control custom-option"></option>
                                {% for print_provider in data.print_providers if 'merchize' != print_provider.name |
                                lower %}
                                <option class="form-control custom-option" value="{{print_provider._id}}">
                                    {{print_provider.name}}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="card-body">
                            <div class="card-title">
                                <h4>Shipping info</h4>
                            </div>
                            <div>
                                <span>Full name:</span><b> {{data.delivery_info.name}}</b>
                            </div>
                            <div>
                                <span>Address:</span><b> {{data.delivery_info.address1}}</b>
                            </div>
                            <div>
                                <span>City:</span><b> {{data.delivery_info.city}}</b>
                            </div>
                            <div>
                                <span>State:</span><b> {{data.delivery_info.state}}</b>
                            </div>
                            <div>
                                <span>Zip:</span><b> {{data.delivery_info.zip}}</b>
                            </div>
                            <div>
                                <span>Country:</span><b> {{data.delivery_info.country}}</b>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="card-title">
                            <h4>Order details</h4>
                        </div>
                        <div class="grid-container mt-2">
                            {% for item in data.line_items %}
                            <div id="item-{{loop.index}}" class="item mb-3">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="row mb-3">
                                            <div class="col-2 grid-item border-end"></div>
                                            <div class="col-2 grid-item border-end"><b>Product</b></div>
                                            <div class="col-8 grid-item border-end"><b>Print Provider</b></div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="col-12">
                                        <div class="row mb-3">
                                            <div class="col-2 grid-item border-end">Style:</div>
                                            <div class="col-2 grid-item border-end">
                                                {{'-'.join(item.size.split('-')[:-1])}}</div>
                                            <div class="col-8 grid-item border-end visually-hidden product-selects">
                                                <select
                                                    class="form-select form-select-sm form-select-color products-select style-select mb-3">
                                                    <option class="form-control custom-option"></option>
                                                </select>
                                            </div>
                                            <div class="col-md-12 text-center loading_spinner">
                                                <div class="spinner-border spinner-border-lg text-primary"
                                                    role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="col-12">
                                        <div class="row mb-3">
                                            <div class="col-2 grid-item border-end">Size:</div>
                                            <div class="col-2 grid-item border-end">{{item.size.split('-')[-1]}}</div>
                                            <div class="col-8 grid-item border-end visually-hidden size-selects">
                                                <select
                                                    class="form-select form-select-sm form-select-color size-select mb-3">
                                                    <option class="form-control custom-option"></option>
                                                </select>
                                            </div>
                                        </div>
                                        <hr>
                                    </div>
                                    <div class="col-12">
                                        <div class="row mb-3">
                                            <div class="col-2 grid-item border-end">Color:</div>
                                            <div class="col-2 grid-item border-end">{{item.color}}</div>
                                            <div class="col-8 grid-item border-end visually-hidden color-selects">
                                                <select
                                                    class="form-select form-select-sm form-select-color color-select mb-3">
                                                    <option class="form-control custom-option"></option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row quantity-{{loop.index}}">
                                        <div class="col-12">
                                            <label for="quantity">Quantity</label>
                                            <button type="button" class="btn btn-sm btn-icon me-2 btn-primary reduce">
                                                <i class='bx bx-minus'></i>
                                            </button>
                                            <input type="number" class="form-control-sm quantity form-input"
                                                name="quantity" value="{{item.quantity}}">

                                            <button type="button" class="btn btn-sm btn-icon me-2 btn-primary add">
                                                <i class='bx bx-plus'></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-12">
                                    <div class="form-check form-check-primary mt-3">
                                        <input class="form-check-input" type="checkbox" name="fast-shipping"
                                            value="true" id="fast-shipping" checked="">
                                        <label class="form-check-label" for="fast-shipping">Printify Express
                                            Orders</label>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-primary btn-fulfill" type="button">Fulfill</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('auth_static',path='libs/dropzone/dropzone.js') }}"></script>
<script src="{{ url_for('auth_static',path='libs/select2/select2.js') }}"></script>
<script src="{{ url_for('auth_static',path='js/forms-file-upload.js') }}"></script>
<script src="{{ url_for('auth_static',path='js/fulfillment.js') }}" defer></script>

{% endblock %}